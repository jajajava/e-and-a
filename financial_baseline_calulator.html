<!DOCTYPE html>

<html>
    <head>
        <style>
            #mainDiv {
                display: grid;
                grid-template-columns: 200px auto;
                column-gap: 20px;
            }
            input {
                margin-bottom: 10px;
                grid-column: 1;
                width: 200px;
            }
            #column2input{
                grid-column: 2;
            }
            label {
                grid-column: 1;
            }
            #addExpenseButton{
                grid-column: 2;
                grid-row: 2;
                width: fit-content;
                height: fit-content;
            }
            #calculate{
                grid-column: 2;
                grid-row: 4;
                width: fit-content;
                height: fit-content;
            }
        </style>
    </head>

    <body>
        <h1>Enter your monthly:</h1>

        <div id="mainDiv">
            <label for="salaryInput">Annual salary</br></label>
            <input id="salaryInput"/>

            <label for="rentInput">Rent/mortgage</br></label>
            <input id="rentInput"/>

            <label for="utilitiesInput">Utilities</br></label>
            <input id="utilitiesInput"/>

            <label for="carInput">Car insurance</br></label>
            <input id="carInput"/>

            <label for="healthInput">Health insurance</br></label>
            <input id="healthInput"/>

            <button id="addExpenseButton">Add expense</button>
            <button id="calculate">Calculate</button>
        </div>

        <script>
            document.getElementById("addExpenseButton").addEventListener("click", addExpense);

            function addExpense() {
                const mainDiv = document.getElementById("mainDiv");

                if (document.getElementById("column2input")) return;

                const column2input = document.createElement("div");
                column2input.id = "column2input";

                column2input.innerHTML = `
                <input id="expenseLabelInput" placeholder="label"/>
                <button id="saveAddExpense">Save</button>
                <button id="cancelAddExpense">Cancel</button>
                `;

                const labelInput = column2input.querySelector("#expenseLabelInput");
                const saveBtn = column2input.querySelector("#saveAddExpense");
                const cancelBtn = column2input.querySelector("#cancelAddExpense");

                cancelBtn.addEventListener("click", closeAddExpense);

                saveBtn.addEventListener("click", () => {
                let label = labelInput.value.trim();
                if (!label) return; // If no label is given

                label = label.toLowerCase().replace(/\s+/g, "_");

                const tempId = `${label}Input`
                if (document.getElementById(tempId) != null) return;

                saveAddExpense(label);
                });

                mainDiv.appendChild(column2input);
            }

            function saveAddExpense(label) {
                const mainDiv = document.getElementById("mainDiv");

                const newLabel = document.createElement("label");
                newLabel.setAttribute("for", `${label}Input`);
                const upperLabel = label[0].toUpperCase() + label.slice(1);
                newLabel.innerHTML = `${upperLabel}<br>`;
                
                const newInput = document.createElement("input");
                newInput.id = `${label}Input`
                newInput.innerHTML = `${label}Input"`;

                mainDiv.appendChild(newLabel);
                mainDiv.appendChild(newInput);
                closeAddExpense();
            }

            function closeAddExpense() {
                document.getElementById("column2input")?.remove();
            }
        </script>
    </body>
</html>